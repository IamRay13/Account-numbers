
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Quick Copy Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light" />
  <!-- SVG favicon -->
  <link rel="icon" type="image/svg+xml" href='data:image/svg+xml;utf8,
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <defs>
      <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
        <stop offset="0" stop-color="%230a2540"/>
        <stop offset="1" stop-color="%230065a6"/>
      </linearGradient>
    </defs>
    <rect x="6" y="10" width="52" height="44" rx="10" fill="url(%23g)" />
    <path d="M20 22 h24 M20 32 h24 M20 42 h24" stroke="%23ffffff" stroke-width="4" stroke-linecap="round"/>
    <circle cx="50" cy="22" r="3.2" fill="%23ffffff"/>
  </svg>' />
  <style>
    :root {
      /* Professional color palette: navy, slate, teal, soft neutrals */
      --bg: #ffffff;
      --text: #0f172a;          /* slate-900 */
      --muted: #64748b;         /* slate-500 */
      --border: #e2e8f0;        /* slate-200 */
      --accent: #0065a6;        /* professional blue */
      --accent-fg: #ffffff;
      --success: #16a34a;       /* green-600 */
      --danger: #ef4444;        /* red-500 */
      --card: #ffffff;
      --shadow: 0 8px 24px rgba(2, 6, 23, 0.10);
      --radius: 14px;
      --radius-sm: 10px;
      --radius-xs: 8px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Layout */
    .app {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      align-items: center;
      margin-bottom: 12px;
    }
    .brand {
      display: flex; align-items: center; gap: 12px;
    }
    .brand svg { width: 28px; height: 28px; color: var(--accent); }
    .brand h1 { font-size: 22px; margin: 0; font-weight: 800; letter-spacing: 0.2px; }
    .hint { font-size: 12px; color: var(--muted); }

    /* Controls row */
    .controls {
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 10px;
      margin-bottom: 16px;
    }
    .search { position: relative; }
    .search input {
      width: 100%;
      height: 42px;
      padding: 0 44px 0 40px;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      background: var(--card);
      outline: none;
      transition: box-shadow 160ms, border-color 160ms;
      box-shadow: var(--shadow);
    }
    .search input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(0,101,166,0.20);
    }
    .search .icon {
      position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
      width: 18px; height: 18px; color: var(--muted);
    }
    .search .clear {
      position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
      width: 26px; height: 26px;
      border: none; background: transparent; color: var(--muted);
      border-radius: 50%;
      display: grid; place-items: center; cursor: pointer;
    }
    .search .clear:hover { background: #f1f5f9; }
    .sort {
      display: flex; align-items: center; gap: 8px;
      padding: 0 12px; border: 1px solid var(--border); border-radius: var(--radius-sm);
      background: var(--card); box-shadow: var(--shadow);
    }
    .sort label { font-size: 12px; color: var(--muted); }
    .sort select {
      height: 38px; border: none; outline: none; background: transparent; color: var(--text);
    }
    .actions { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn {
      height: 42px; padding: 0 14px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      display: inline-flex; align-items: center; gap: 8px;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: background 160ms, border-color 160ms, transform 80ms;
    }
    .btn:active { transform: translateY(1px); }
    .btn svg { width: 18px; height: 18px; color: var(--text); }
    .btn.primary {
      background: var(--accent);
      color: var(--accent-fg);
      border-color: var(--accent);
    }

    /* Card list */
    .list {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .list-header {
      display: grid;
      grid-template-columns: 1.2fr 1fr auto;
      gap: 10px;
      padding: 12px 14px;
      border-bottom: 1px solid var(--border);
      background: #f8fafc;
      font-size: 12px; color: var(--muted);
    }
    .item {
      display: grid;
      grid-template-columns: 1.2fr 1fr auto;
      gap: 10px;
      padding: 12px 14px;
      border-bottom: 1px solid var(--border);
      align-items: center;
    }
    .item:last-child { border-bottom: none; }
    .cell { display: flex; align-items: center; gap: 8px; min-width: 0; }
    .label, .value {
      display: inline-block;
      padding: 8px 10px;
      border: 1px dashed transparent;
      border-radius: var(--radius-xs);
      cursor: pointer;
      transition: background 120ms, border-color 120ms;
      user-select: none;
      max-width: 100%;
      overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
    }
    .label:hover, .value:hover { background: #f8fafc; border-color: #e5e7eb; }
    .muted { color: var(--muted); font-size: 12px; }
    .item-actions { display: inline-flex; gap: 6px; }
    .icon-btn {
      width: 34px; height: 34px;
      display: grid; place-items: center;
      border: 1px solid var(--border);
      border-radius: var(--radius-xs);
      background: var(--card);
      cursor: pointer;
      transition: background 160ms, border-color 160ms, transform 80ms;
    }
    .icon-btn:hover { background: #f8fafc; }
    .icon-btn:active { transform: translateY(1px); }
    .icon-btn svg { width: 18px; height: 18px; color: var(--muted); }

    /* Modal */
    .modal-backdrop {
      position: fixed; inset: 0;
      background: rgba(2,6,23,0.42);
      display: none; z-index: 40;
    }
    .modal {
      position: fixed; inset: 0;
      display: none; place-items: center; z-index: 50;
      padding: 24px;
    }
    .dialog {
      width: 100%; max-width: 560px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .dialog header { padding: 16px 18px; border-bottom: 1px solid var(--border); font-weight: 700; }
    .dialog .content { padding: 18px; display: grid; gap: 12px; }
    .field label { font-size: 12px; color: var(--muted); display: block; margin-bottom: 6px; }
    .field input, .field textarea {
      width: 100%; height: 42px; padding: 0 12px;
      border: 1px solid var(--border); border-radius: var(--radius-sm);
      outline: none; background: var(--card);
    }
    .field textarea { height: 96px; padding-top: 10px; resize: vertical; }
    .dialog footer { padding: 12px 18px; border-top: 1px solid var(--border); display: flex; gap: 8px; justify-content: flex-end; }

    /* Toast */
    .toast {
      position: fixed; left: 50%; bottom: 22px; transform: translateX(-50%);
      background: var(--success);
      color: #ffffff;
      padding: 12px 16px;
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow);
      display: none;
      z-index: 60;
      font-weight: 600;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .header { grid-template-columns: 1fr; }
      .controls { grid-template-columns: 1fr auto; grid-auto-flow: row; }
      .actions { justify-self: end; }
    }
    @media (max-width: 760px) {
      .list-header, .item { grid-template-columns: 1fr; }
      .item-actions { margin-top: 6px; }
      .label, .value { max-width: 100%; }
    }
    @media (max-height: 520px) {
      .dialog { align-items: start; }
    }
  </style>
</head>
<body>
  <div class="app" aria-label="Quick Copy Vault">
    <div class="header">
      <div class="brand" aria-label="App brand">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <rect x="3" y="5" width="18" height="14" rx="3" fill="none" stroke="currentColor" stroke-width="1.5"/>
          <path d="M7 9 h10 M7 12 h10 M7 15 h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <h1>Quick Copy Vault</h1>
      </div>
      <div class="hint">Tap a label or value to copy. Press A to add, E to export, I to import.</div>
    </div>

    <div class="controls" role="region" aria-label="Controls">
      <div class="search">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="11" cy="11" r="7" fill="none" stroke="currentColor" stroke-width="1.5"/>
          <path d="M20 20 l-3.5 -3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input id="search" type="search" placeholder="Search by label or value…" aria-label="Search" autocomplete="off" />
        <button id="clearSearch" class="clear" title="Clear search" aria-label="Clear search">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="1.2"/>
            <path d="M9 9 L15 15 M15 9 L9 15" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="sort" aria-label="Sort options">
        <label for="sortSelect">Sort:</label>
        <select id="sortSelect">
          <option value="label">Label (A–Z)</option>
          <option value="updated">Last updated</option>
        </select>
      </div>

      <div class="actions">
        <button id="addBtn" class="btn primary" title="Add (A)">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5 v14 M5 12 h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <span>Add</span>
        </button>
        <button id="exportBtn" class="btn" title="Export (E)">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 4 v10 M7 9 l5-5 5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
            <rect x="4" y="14" width="16" height="6" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span>Export</span>
        </button>
        <label for="importInput" class="btn" title="Import (I)" style="cursor:pointer">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 20 v-10 M7 15 l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
            <rect x="4" y="4" width="16" height="6" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span>Import</span>
        </label>
        <input id="importInput" type="file" accept="application/json,.json" style="display:none" />
      </div>
    </div>

    <div class="list" role="table" aria-label="Records list">
      <div class="list-header" role="row">
        <div class="cell" role="columnheader">Label</div>
        <div class="cell" role="columnheader">Value</div>
        <div class="cell" role="columnheader">Actions</div>
      </div>
      <div id="items"></div>
    </div>
  </div>

  <!-- Add/Edit Dialog -->
  <div class="modal-backdrop" id="backdrop" aria-hidden="true"></div>
  <div class="modal" id="modal" aria-hidden="true" aria-label="Record dialog">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dialogTitle">
      <header id="dialogTitle">Add record</header>
      <div class="content">
        <div class="field">
          <label for="labelInput">Label</label>
          <input id="labelInput" type="text" placeholder="e.g., PLDT Account number" maxlength="160" />
        </div>
        <div class="field">
          <label for="valueInput">Value</label>
          <textarea id="valueInput" placeholder="e.g., 123456789" maxlength="1024"></textarea>
        </div>
      </div>
      <footer>
        <button id="cancelBtn" class="btn">Cancel</button>
        <button id="saveBtn" class="btn primary">Save</button>
      </footer>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite">Copied</div>

  <script>
    // Storage keys and state
    const LS_KEY = "quick-copy-vault:v1";
    const LS_SORT_KEY = "quick-copy-vault:sort";
    let records = [];
    let editingId = null;
    let sortMode = localStorage.getItem(LS_SORT_KEY) || "label";

    // Elements
    const itemsEl = document.getElementById("items");
    const searchEl = document.getElementById("search");
    const clearSearchEl = document.getElementById("clearSearch");
    const sortSelect = document.getElementById("sortSelect");
    const addBtn = document.getElementById("addBtn");
    const exportBtn = document.getElementById("exportBtn");
    const importInput = document.getElementById("importInput");
    const backdrop = document.getElementById("backdrop");
    const modal = document.getElementById("modal");
    const dialogTitle = document.getElementById("dialogTitle");
    const labelInput = document.getElementById("labelInput");
    const valueInput = document.getElementById("valueInput");
    const cancelBtn = document.getElementById("cancelBtn");
    const saveBtn = document.getElementById("saveBtn");
    const toastEl = document.getElementById("toast");

    // Utility
    const now = () => Date.now();
    const uid = () => Math.random().toString(36).slice(2) + Math.random().toString(36).slice(2);
    const sanitize = (s) => (s ?? "").toString().trim();
    const showToast = (msg = "Copied") => {
      toastEl.textContent = msg;
      toastEl.style.display = "block";
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => { toastEl.style.display = "none"; }, 1400);
    };
    const inactive = () => {
      const ae = document.activeElement;
      return !ae || ae === document.body;
    };

    // Persistence
    function load() {
      try {
        const raw = localStorage.getItem(LS_KEY);
        if (!raw) return [];
        const data = JSON.parse(raw);
        if (!Array.isArray(data)) return [];
        return data.map(r => ({
          id: String(r.id || uid()),
          label: String(r.label || ""),
          value: String(r.value || ""),
          createdAt: Number(r.createdAt || now()),
          updatedAt: Number(r.updatedAt || now()),
        }));
      } catch {
        return [];
      }
    }
    function save() {
      localStorage.setItem(LS_KEY, JSON.stringify(records));
    }

    // Import/Export format
    function exportJSON() {
      const payload = {
        version: 1,
        exportedAt: new Date().toISOString(),
        records: records,
      };
      const blob = new Blob([JSON.stringify(payload, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "quick-copy-vault.json";
      document.body.appendChild(a);
      a.click();
      setTimeout(() => { URL.revokeObjectURL(url); a.remove(); }, 0);
    }
    async function importJSON(file) {
      const text = await file.text();
      let data;
      try {
        data = JSON.parse(text);
      } catch {
        alert("Invalid JSON file.");
        return;
      }
      if (data?.version !== 1 || !Array.isArray(data?.records)) {
        alert("Unsupported format. Expected { version: 1, records: [...] }.");
        return;
      }
      const confirmReplace = confirm("Import will replace current records. Continue?");
      if (!confirmReplace) return;
      records = data.records.map(r => ({
        id: String(r.id || uid()),
        label: String(r.label || ""),
        value: String(r.value || ""),
        createdAt: Number(r.createdAt || now()),
        updatedAt: Number(r.updatedAt || now()),
      }));
      sortRecords();
      save();
      render();
      showToast("Imported");
    }

    // Sort
    function sortAZ() {
      records.sort((a, b) => a.label.localeCompare(b.label, undefined, { sensitivity: "base" }));
    }
    function sortUpdated() {
      records.sort((a, b) => b.updatedAt - a.updatedAt);
    }
    function sortRecords() {
      if (sortMode === "updated") sortUpdated(); else sortAZ();
    }

    // CRUD
    function openDialog(editId = null) {
      editingId = editId;
      if (editId) {
        const rec = records.find(r => r.id === editId);
        if (!rec) return;
        dialogTitle.textContent = "Edit record";
        labelInput.value = rec.label;
        valueInput.value = rec.value;
      } else {
        dialogTitle.textContent = "Add record";
        labelInput.value = "";
        valueInput.value = "";
      }
      backdrop.style.display = "block";
      modal.style.display = "grid";
      modal.setAttribute("aria-hidden", "false");
      setTimeout(() => labelInput.focus(), 60);
    }
    function closeDialog() {
      backdrop.style.display = "none";
      modal.style.display = "none";
      modal.setAttribute("aria-hidden", "true");
      editingId = null;
    }
    function saveRecord() {
      const label = sanitize(labelInput.value);
      const value = sanitize(valueInput.value);
      if (!label) { alert("Label is required."); labelInput.focus(); return; }
      if (!value) { alert("Value is required."); valueInput.focus(); return; }
      if (editingId) {
        const idx = records.findIndex(r => r.id === editingId);
        if (idx >= 0) {
          records[idx] = { ...records[idx], label, value, updatedAt: now() };
        }
      } else {
        records.push({ id: uid(), label, value, createdAt: now(), updatedAt: now() });
      }
      sortRecords();
      save();
      render();
      closeDialog();
    }
    function deleteRecord(id) {
      const rec = records.find(r => r.id === id);
      const ok = confirm(`Delete "${rec?.label ?? "this record"}"?`);
      if (!ok) return;
      records = records.filter(r => r.id !== id);
      save();
      render();
    }

    // Copy handlers
    async function copyText(text, labelForToast = "") {
      try {
        await navigator.clipboard.writeText(text);
        showToast(labelForToast ? `Copied ${labelForToast}` : "Copied");
      } catch {
        const ta = document.createElement("textarea");
        ta.value = text; document.body.appendChild(ta);
        ta.select(); document.execCommand("copy");
        ta.remove();
        showToast("Copied");
      }
    }

    // Render
    function render() {
      const query = sanitize(searchEl.value).toLowerCase();
      const frag = document.createDocumentFragment();

      const filtered = records.filter(r =>
        !query ||
        r.label.toLowerCase().includes(query) ||
        r.value.toLowerCase().includes(query)
      );

      if (filtered.length === 0) {
        const empty = document.createElement("div");
        empty.className = "item";
        empty.innerHTML = `
          <div class="cell"><span class="muted">No records found.</span></div>
          <div class="cell"></div>
          <div class="cell"></div>`;
        frag.appendChild(empty);
      } else {
        filtered.forEach(r => {
          const row = document.createElement("div");
          row.className = "item";
          row.setAttribute("role", "row");

          const c1 = document.createElement("div");
          c1.className = "cell";
          const labelSpan = document.createElement("span");
          labelSpan.className = "label";
          labelSpan.textContent = r.label;
          labelSpan.title = "Tap to copy label";
          labelSpan.addEventListener("click", () => copyText(r.label, "label"));
          c1.appendChild(labelSpan);

          const c2 = document.createElement("div");
          c2.className = "cell";
          const valueSpan = document.createElement("span");
          valueSpan.className = "value";
          valueSpan.textContent = r.value;
          valueSpan.title = "Tap to copy value";
          valueSpan.addEventListener("click", () => copyText(r.value, "value"));
          c2.appendChild(valueSpan);

          const c3 = document.createElement("div");
          c3.className = "cell item-actions";
          const editBtn = document.createElement("button");
          editBtn.className = "icon-btn";
          editBtn.title = "Edit";
          editBtn.innerHTML = `<svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M4 20 h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M14.5 5.5 l4 4 L9 19 H5 v-4 z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
          </svg>`;
          editBtn.addEventListener("click", () => openDialog(r.id));
          const delBtn = document.createElement("button");
          delBtn.className = "icon-btn";
          delBtn.title = "Delete";
          delBtn.innerHTML = `<svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6 7 h12 M9 7 v-2 h6 v2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            <rect x="6.5" y="7" width="11" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="1.6"/>
            <path d="M10 11 v6 M14 11 v6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
          </svg>`;
          delBtn.addEventListener("click", () => deleteRecord(r.id));
          c3.appendChild(editBtn);
          c3.appendChild(delBtn);

          row.appendChild(c1);
          row.appendChild(c2);
          row.appendChild(c3);
          frag.appendChild(row);
        });
      }

      itemsEl.innerHTML = "";
      itemsEl.appendChild(frag);
    }

    // Initial seed
    function seedIfEmpty() {
      if (records.length > 0) return;
      records = [
        { id: uid(), label: "PLDT Account number", value: "123456789", createdAt: now(), updatedAt: now() }
      ];
      sortRecords();
      save();
    }

    // Events
    addBtn.addEventListener("click", () => openDialog());
    exportBtn.addEventListener("click", exportJSON);
    importInput.addEventListener("change", (e) => {
      const file = e.target.files?.[0];
      if (file) importJSON(file).finally(() => { importInput.value = ""; });
    });

    cancelBtn.addEventListener("click", closeDialog);
    backdrop.addEventListener("click", closeDialog);
    saveBtn.addEventListener("click", saveRecord);

    // Search and clear
    searchEl.addEventListener("input", render);
    clearSearchEl.addEventListener("click", () => {
      searchEl.value = "";
      render();
      searchEl.focus();
    });

    // Sort select persistence
    sortSelect.value = sortMode;
    sortSelect.addEventListener("change", (e) => {
      sortMode = e.target.value;
      localStorage.setItem(LS_SORT_KEY, sortMode);
      sortRecords();
      render();
    });

    // Keyboard shortcuts: A (add), E (export), I (import) when inactive
    window.addEventListener("keydown", (e) => {
      const key = e.key.toLowerCase();
      if (!inactive()) return;
      if (key === "a") { e.preventDefault(); openDialog(); }
      else if (key === "e") { e.preventDefault(); exportJSON(); }
      else if (key === "i") { e.preventDefault(); importInput.click(); }
    });

    // Accessibility: close dialog with Escape
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.style.display === "grid") {
        closeDialog();
      }
    });

    // Boot
    records = load();
    seedIfEmpty();
    sortRecords();
    render();

    // Mobile tap responsiveness
    document.addEventListener("touchstart", () => {}, { passive: true });
  </script>
</body>
</html>
